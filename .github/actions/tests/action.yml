---
name: Tests
description: Runs Go Tests

runs:
  using: composite
  steps:
    - name: Set up Go
      uses: actions/setup-go@v4
      with:
        go-version: ">=1.20"

    - name: Run all Tests
      shell: bash
      run: |
        go version
        go test -json ./...

    - name: Run with coverage
      shell: bash
      run: |
        go version
        go test -json -v ./... -cover
    
    - name: Run integration tests
      shell: bash
      run: |
        go version
        go test -json -v -tags=integration ./internal/radar -v

    - name: Run benchmark tests
      shell: bash
      run: |
        go version
        go test -json -bench=. ./internal/... -benchmem